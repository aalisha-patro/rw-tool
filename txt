import React, { useState } from "react";
import { Container, Paper, TextField, Button, Grid, FormControl, Select, MenuItem } from "@material-ui/core";
import FolderIcon from "@material-ui/icons/Folder";
import FileIcon from "@material-ui/icons/InsertDriveFile";
import Breadcrumbs from "./Breadcrumbs"; // Import your Breadcrumbs component

const MainContent = ({ folders }) => {
  const [currentFolders, setCurrentFolders] = useState(folders);
  const [searchInput, setSearchInput] = useState("");
  const [filterType, setFilterType] = useState("all");

  const handleFolderClick = (clickedFolder) => {
    // ... your existing folder click logic ...
  };

  const handleSearch = (event) => {
    const searchTerm = event.target.value.toLowerCase();
    setSearchInput(searchTerm);

    if (searchTerm === "") {
      setCurrentFolders(folders);
    } else {
      const filteredFolders = filterFolders(folders, searchTerm);
      setCurrentFolders(filteredFolders);
    }
  };

  const handleFilter = () => {
    let filteredFolders = folders;

    if (filterType !== "all") {
      filteredFolders = folders.filter((folder) => folder.type === filterType);
    }

    setCurrentFolders(filteredFolders);
  };

  const filterFolders = (foldersArray, searchTerm) => {
    return foldersArray.filter((folder) => {
      const folderName = folder.name.toLowerCase();
      return folderName.includes(searchTerm);
    });
  };

  return (
    <Container>
      <Paper elevation={3} style={{ padding: "20px", marginBottom: "20px" }}>
        <Breadcrumbs />
      </Paper>
      <Paper elevation={3} style={{ padding: "20px", marginBottom: "20px", display: "flex", alignItems: "center" }}>
        <TextField
          label="Search Folders"
          variant="outlined"
          fullWidth
          value={searchInput}
          onChange={handleSearch}
        />
        <Button variant="contained" color="primary" onClick={handleFilter}>
          Filter
        </Button>
        <FormControl>
          <Select
            value={filterType}
            onChange={(event) => setFilterType(event.target.value)}
            displayEmpty
          >
            <MenuItem value="all">All</MenuItem>
            <MenuItem value="date">Date</MenuItem>
            <MenuItem value="type">Type</MenuItem>
          </Select>
        </FormControl>
      </Paper>
      <Grid container spacing={3}>
        {/* Render the filtered folders */}
        {currentFolders.map((folder, index) => (
          <Grid item xs={3} key={index} onClick={() => handleFolderClick(folder)}>
            <FolderIcon />
            <span>{folder.name}</span>
          </Grid>
        ))}
      </Grid>
    </Container>
  );
};

export default MainContent;
